local BolboField = {}
local TweenService = game:GetService("TweenService")

function BolboField:CreateWindow(config)
    -- Validate configuration
    assert(type(config) == "string" or type(config.Name) == "string", "Name must be a string")
    
    local name = type(config) == "string" and config or config.Name
    
    -- Create base GUI structure
    local gui = Instance.new("ScreenGui")
    gui.Name = "BolboHub"
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    gui.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    
    -- Create main window
    local window = Instance.new("Frame")
    window.Name = "Window"
    window.BorderSizePixel = 0
    window.BackgroundColor3 = Color3.fromRGB(43, 43, 43)
    window.Size = UDim2.new(0, 654, 0, 394)
    window.Position = UDim2.new(0.25614, 0, 0.25498, 0)
    window.BackgroundTransparency = 0.3
    window.Parent = gui
    
    -- Add UIStroke to window
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(117, 117, 117)
    stroke.Parent = window
    
    -- Add separator line
    local separator = Instance.new("Frame")
    separator.BorderSizePixel = 0
    separator.BackgroundColor3 = Color3.fromRGB(117, 117, 117)
    separator.Size = UDim2.new(0, 654, 0, 1)
    separator.Position = UDim2.new(0, 0, 0.11675, 0)
    separator.Parent = window
    
    -- Create destroy button
    local destroyBtn = Instance.new("TextButton")
    destroyBtn.Name = "DestroyButton"
    destroyBtn.BorderSizePixel = 0
    destroyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    destroyBtn.TextSize = 21
    destroyBtn.BackgroundTransparency = 1
    destroyBtn.FontFace = Font.new("rbxasset://fonts/families/FredokaOne.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal)
    destroyBtn.ZIndex = 3
    destroyBtn.Size = UDim2.new(0, 53, 0, 46)
    destroyBtn.Text = "X"
    destroyBtn.Position = UDim2.new(0.91896, 0, 0, 0)
    destroyBtn.Parent = window
    
    -- Create destroy button frame
    local destroyBtnFrame = Instance.new("Frame")
    destroyBtnFrame.Name = "DestroyButtonFrame"
    destroyBtnFrame.BorderSizePixel = 0
    destroyBtnFrame.BackgroundColor3 = Color3.fromRGB(43, 43, 43)
    destroyBtnFrame.Size = UDim2.new(0, 40, 0, 40)
    destroyBtnFrame.Position = UDim2.new(0.92813, 0, 0.00761, 0)
    destroyBtnFrame.BackgroundTransparency = 1
    destroyBtnFrame.Parent = window
    
    -- Add UICorner to destroy button frame
    local destroyCorner = Instance.new("UICorner")
    destroyCorner.Parent = destroyBtnFrame
    
    -- Create minimize button
    local minBtn = Instance.new("TextButton")
    minBtn.Name = "MinimalizeButton"
    minBtn.BorderSizePixel = 0
    minBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    minBtn.TextSize = 55
    minBtn.BackgroundTransparency = 1
    minBtn.FontFace = Font.new("rbxasset://fonts/families/Zekton.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal)
    minBtn.ZIndex = 3
    minBtn.Size = UDim2.new(0, 41, 0, 45)
    minBtn.Text = "-"
    minBtn.Position = UDim2.new(0.85627, 0, 0, 0)
    minBtn.Parent = window
    
    -- Create minimize button frame
    local minBtnFrame = Instance.new("Frame")
    minBtnFrame.Name = "MinimalizeButtonFrame"
    minBtnFrame.BorderSizePixel = 0
    minBtnFrame.BackgroundColor3 = Color3.fromRGB(43, 43, 43)
    minBtnFrame.Size = UDim2.new(0, 40, 0, 40)
    minBtnFrame.Position = UDim2.new(0.854, 1, 0.008, 0)
    minBtnFrame.BackgroundTransparency = 1
    minBtnFrame.Parent = window
    
    -- Add UICorner to minimize button frame
    local minCorner = Instance.new("UICorner")
    minCorner.Parent = minBtnFrame
    
    -- Add UICorner to main window
    local windowCorner = Instance.new("UICorner")
    windowCorner.Parent = window
    
    -- Create window label
    local windowLabel = Instance.new("TextLabel")
    windowLabel.Name = "WindowLabel"
    windowLabel.BorderSizePixel = 0
    windowLabel.TextSize = 16
    windowLabel.TextXAlignment = Enum.TextXAlignment.Left
    windowLabel.BackgroundTransparency = 1
    windowLabel.FontFace = Font.new("rbxasset://fonts/families/Ubuntu.json", Enum.FontWeight.Bold, Enum.FontStyle.Normal)
    windowLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    windowLabel.Size = UDim2.new(0, 188, 0, 45)
    windowLabel.Text = name
    windowLabel.Position = UDim2.new(0.01835, 0, 0, 0)
    windowLabel.Parent = window
    
    -- Create BolboHub image
    local image = Instance.new("ImageButton")
    image.Name = "BolboHubImage"
    image.BorderSizePixel = 0
    image.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    image.Image = "rbxassetid://77521577858152"
    image.Size = UDim2.new(0, 67, 0, 67)
    image.Visible = false
    image.Position = UDim2.new(0.47506, 0, 0.12562, 0)
    image.Parent = gui
    
    -- Add UICorner to image
    local imageCorner = Instance.new("UICorner")
    imageCorner.Parent = image
    
    -- Add UIStroke to image
    local imageStroke = Instance.new("UIStroke")
    imageStroke.Color = Color3.fromRGB(117, 117, 117)
    imageStroke.Parent = image
    
    -- Button functionality
    local function setupButtonTween(button, frame)
        local function createTween(targetTransparency)
            local tweenInfo = TweenInfo.new(
                0.3,
                Enum.EasingStyle.Linear,
                Enum.EasingDirection.Out,
                0,
                false,
                0
            )
            return TweenService:Create(frame, tweenInfo, {BackgroundTransparency = targetTransparency})
        end
        
        button.MouseEnter:Connect(function()
            createTween(0.3):Play()
        end)
        
        button.MouseLeave:Connect(function()
            createTween(1):Play()
        end)
    end
    
    setupButtonTween(destroyBtn, destroyBtnFrame)
    setupButtonTween(minBtn, minBtnFrame)
    
    -- Destroy button functionality
    destroyBtn.MouseButton1Click:Connect(function()
        gui:Destroy()
    end)
    
    -- Minimize button functionality
    minBtn.MouseButton1Click:Connect(function()
        window.Visible = false
        image.Visible = true
    end)
    
    -- Image button functionality
    image.MouseButton1Click:Connect(function()
        window.Visible = true
        image.Visible = false
    end)
    
    -- Return window object
    return {
        Window = window,
        GUI = gui
    }
end

return BolboField
